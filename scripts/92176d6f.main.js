var LandingPage=Parse.View.extend({events:{"click .feature-button":"featuresOption","click .about-button":"aboutOption","click .pricing-button":"pricingOption","click .submit-message":"submitMessage"},template:_.template($(".landing-page-template").text()),featuresTemplate:_.template($(".features-option-template").text()),aboutUsTemplate:_.template($(".about-us-template").text()),pricingTemplate:_.template($(".pricing-option-template").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(a){var b=this;this.router=a.router,$(".navbar").css("display","none"),$(".landing-page-here").html(this.$el),this.$el.html(this.template()),this.render(),setTimeout(function(){$(".hero-img").css("padding-top","46px")},600),setTimeout(function(){b.badTagline()},1800),setTimeout(function(){b.eraseBadTagline()},4600),setTimeout(function(){b.goodTaglineType()},5580),$(".landing-sign-in").click(function(){b.router.navigate("#sign-in",{trigger:!0})}),$(".submit-message").click(function(){b.submitMessage()}),console.log(typed),$(".element0").typed({strings:["apt-get install konquer"],typeSpeed:30,backDelay:750,loop:!1,loopCount:!1,callback:function(){}})},render:function(){$(".alan-arms-pos").html(""),$(".alan-arms-pos").css("display","none"),$(".app-container").css("display","none"),$(".put-title-here").css("display","none")},signIn:function(){console.log("chicken"),new FrontPage},submitMessage:function(){if(console.log("you are an idiot!"),$("#email-input").val().length>0&&$("#name-input").val().length>0&&$("#message-input").val().length>0){var a="mailto:support@oplan.co?cc="+$("#email-input").val()+"&subject=OPLAN inquiry - "+$("#name-input").val()+"&body="+$("#message-input").val();window.location.href=a;var b=Parse.Object.extend("newContacts"),c=new b;c.set({name:$("#name-input").val(),email:$("#email-input").val(),message:$("#message-input").val()}).save(),console.log(c)}else $(".contact-input").css("border","1px solid red").val("")},badTagline:function(){for(var a="You take care of everything.",b=0;b<=a.length;b++)!function(b){setTimeout(function(){$(".body-text").text(a.slice(0,b)),$(".body-text").append('<span class="typed-cursor">_</span>')},40*b)}(b);$(".body-text").addClass("stop-delete")},eraseBadTagline:function(){if($(".body-text").hasClass("stop-delete")){var a=$(".body-text").text(),b=a.length,c="",d=c.length,e=b-d;console.log(e);{setInterval(function(){$(".body-text").text().length>d&&$(".body-text").hasClass("stop-delete")&&$(".body-text").text($(".body-text").text().slice(0,$(".body-text").text().length-1))},30)}}},goodTaglineType:function(){$(".body-text").removeClass("stop-delete");for(var a="Let us take care of everything else.",b=$(".body-text").text().length;b<=a.length;b++)!function(b){setTimeout(function(){$(".body-text").text(a.slice(0,b)),$(".body-text").append('<span class="typed-cursor">_</span>')},30*b)}(b)}}),AttachForm3=Parse.View.extend({events:{},template:_.template($(".attach-form3-view").text()),initialize:function(){$(".app-container").html(this.el),this.render()},render:function(){$(this.el).append(this.template())}}),BackorderList=Parse.View.extend({events:{},template:_.template($(".backorder-list-view").text()),backorderItemTemplate:_.template($(".backorder-list-item").text()),initialize:function(){$(".app-container").html(this.el),this.render()},render:function(){$(this.el).append(this.template()),this.getBackorderItems()},getBackorderItems:function(){var a=this;$(".backorder-list-item-bound").html("");var b=new Parse.Query("backOrder");b.each(function(b){$(".backorder-list-item-bound").append(a.backorderItemTemplate({backorder:b.attributes?b.attributes:"",itemType:b.attributes&&b.attributes.itemType.attributes?b.attributes:"",order:b.attributes.order?b.attributes.order:""}))})}}),CustomerList=Parse.View.extend({events:{"click .create-customer":"createCustomerContainer","click .new-customer-submit":"addCustomer","click .cancel-customer":"cancelCustomerCreation","click .edit-customer":"editCustomerModal","click #close-modal":"closeModal","click .save-customer-changes":"saveCustomerChanges","click .add-order":"addOrder"},template:_.template($(".customer-list-view").text()),customerListTemplate:_.template($(".customer-list-item").text()),customerModalTemplate:_.template($(".customer-modal-template").text()),titleTemplate:_.template($(".page-title").text()),orderProgressBarTemplate:_.template($(".order-progress-bar").text()),loaderTemplate:_.template($(".loading-cover-template").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$(".navbar").css("display","block"),$("html, body").scrollTop(0),$(".progress-bar-body").html(""),$(".alan-arms-pos").html(this.navbarTemplate);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),$(".app-container").html(this.el),this.phoneValidate(),this.render()}},render:function(){$(this.el).html(""),$(this.el).append(this.template()),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("CUSTOMER LIST"),$(".app-container").append(this.loaderTemplate()),this.phoneValidate(),this.emailValidate(),this.getCustomers()},listIt:function(){{var a={valueNames:["company-name","company-owner","company-phone","company-email","FFL","address","city","state","zip"]};new List("contacts",a)}},closeModal:function(){$("body").css("overflow","visible"),$(".modal-div").html("")},phoneValidate:function(){function a(a,b){$(a).keyup(function(){$.isNumeric($(this).val())?($(".phone-number-input").css("background","white"),$(this).val().length>=b&&$(this).next("input").focus()):$(this).css("background",$(this).val().length?"rgba(255, 0, 0, 0.35)":"white")})}_.each($(".phone-number-input"),function(b,c){a(b,[3,3,4][c])}),_.each($(".zip-input"),function(b,c){a(b,[5][c])}),_.each($(".edit-phone-number-input"),function(b,c){a(b,[3,3,4][c])}),_.each($(".edit-zip-input"),function(b,c){a(b,[5][c])}),addDashes=function(a){var b=/(\D+)/g,c="",d="",e="";a.value=a.value.replace(b,""),c=a.value.substr(0,3),d=a.value.substr(3,3),e=a.value.substr(6,4),a.value=c+"-"+d+"-"+e}},emailValidate:function(){function a(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}$(".email-input").keyup(function(){$(this).css("background",a($(this).val())?"white":"rgba(255, 0, 0, 0.35)"),$(this).val()<1&&$(this).css("background","white")})},createCustomerContainer:function(){$(".create-customer").attr("disabled","disabled"),$(".hidden-customer-creation").addClass("visible-customer-creation")},cancelCustomerCreation:function(){$(".create-customer-input").val(""),$(".create-customer").attr("disabled",!1),$(".hidden-customer-creation").removeClass("visible-customer-creation")},addCustomer:function(){var a=this,b=Parse.Object.extend("customer"),c=new b;return""===$(".company-input").val()?($(".create-customer-input").val(""),$(".company-input").focus(),""):(c.set({Company:$(".company-input").val(),FirstName:$(".first-name-input").val(),LastName:$(".last-name-input").val(),Phone:parseInt($(".phone-number-input").val()),email:$(".email-input").val(),FFL:$(".ffl-input").val(),Address1:$(".address-input").val(),City:$(".city-input").val(),Zip:parseInt($(".zip-input").val()),State:$(".state-input").val(),shop:Parse.User.current()}).save(),a.getCustomers(),a.cancelCustomerCreation(),void 0)},getCustomers:function(){var a=this;$(".customer-list").html(""),this.query=new Parse.Query("customer"),this.query.equalTo("shop",Parse.User.current()),this.query.each(function(b){b&&b.attributes.shop&&b.attributes.shop.id===Parse.User.current().id&&$("tbody.list").append(a.customerListTemplate({customer:b.attributes,model:b}))}).then(function(){a.listIt(),a.loader()})},loader:function(){$(".loading-cover").css("opacity",0),$(".chamber-loader").css("opacity",0),setTimeout(function(){$(".loading-cover").remove(),$(".chamber-loader").remove()},220)},editCustomerModal:function(){var a=this,b=$(event.target).attr("name"),c=new Parse.Query("customer");c.limit(1500),c.equalTo("Company",b),c.equalTo("shop",Parse.User.current()),c.first({success:function(b){$("body").css("overflow","hidden"),$(".modal-div").append(a.customerModalTemplate({customer:b.attributes,model:b})),$(".state-input").selectedIndex=b.attributes.State},error:function(a){console.log("Error: "+a.code+" "+a.message)}})},saveCustomerChanges:function(){function a(a,b){$(a).keyup(function(){$.isNumeric($(this).val())?($(".phone-number-input").css("background","white"),$(this).val().length>=b&&$(this).next("input").focus()):$(this).css("background",$(this).val().length?"rgba(255, 0, 0, 0.35)":"white")})}$(".edit-phone-number-input"),function(b,c){a(b,[3,3,4][c])},$(".edit-zip-input"),function(b,c){a(b,[5][c])};var b=this,c=$(event.target).attr("name"),d=new Parse.Query("customer");d.limit(1500),d.equalTo("Company",c),d.equalTo("shop",Parse.User.current()),d.first({success:function(a){var c=a.attributes;a.set({Company:0!=$(".company-input").val().length?$(".company-input").val():c.Company,FirstName:0!=$(".first-name-input").val().length?$(".first-name-input").val():c.FirstName,LastName:0!=$(".last-name-input").val().length?$(".last-name-input").val():c.LastName,Phone:0!=$(".edit-phone-number-input").val().length?parseInt($(".edit-phone-number-input").val()):c.Phone,email:0!=$(".email-input").val().length?$(".email-input").val():c.email,FFL:0!=$(".ffl-input").val().length?$(".ffl-input").val():c.FFL,Address1:0!=$(".first-name-input").val().length?$(".first-name-input").val():c.Address1,City:0!=$(".city-input").val().length?$(".city-input").val():c.City,Zip:0!=$(".edit-zip-input").val().length?parseInt($(".edit-zip-input").val()):c.Zip,State:0!=$(".state-input").val().length?$(".state-input").val():c.State,shop:Parse.User.current()}).save(),b.closeModal(),b.getCustomers()},error:function(a){console.log("Error: "+a.code+" "+a.message)}})},addOrder:function(a){var b=this,c=new Parse.Query("customer");c.equalTo("objectId",$(a.currentTarget).attr("id")),c.first({success:function(a){b.shoppingCart={cart:[],customer:a},b.showPlaceOrder(),$(".progress-bar-body").append(b.orderProgressBarTemplate())},error:function(a){console.log(a)}})},showPlaceOrder:function(){this.inventoryList=new CustomerOrderInventoryList({customer:router.currentView.shoppingCart.customer.attributes})}}),CustomerOrderInventoryList=Parse.View.extend({events:{"click span.item-type":"itemTypeDetail","change .manufacturers":"activeManufacturer","click button.order-item":"addItemOrder","click .confirm-order-button":"swapConfirmView","click .search-all-inventory":"getAllItemTypes","click .order-button-container":"orderModal","click .minimize-cart":"toggleCart","click .add-to-order":"addToOrder"},template:_.template($(".order-inventory-list-view").text()),listItemTemplate:_.template($(".order-inventory-list-item-view").text()),listItemDetailTemplate:_.template($(".order-inventory-list-detail-view").text()),shoppingCartTemplate:_.template($(".order-shopping-cart-view").text()),loaderTemplate:_.template($(".loading-cover-template").text()),orderItemTemplate:_.template($(".customer-info-order-items-template").text()),itemInstanceTemplate:_.template($(".confirm-order-item-instance-view").text()),orderButtonTemplate:_.template($(".order-modal-button").text()),confirmTemplate:_.template($(".confirm-order-view").text()),initialize:function(a){this.customer=a.customer,$(".app-container").html(this.el),this.jankyAddCustomer(),this.render(),this.getAllItemTypes();var b=$(".inventory-section").offset().top;$(document).scroll(function(){$(this).scrollTop()>b&&($(".order-form-container").width()>95?$(".order-form-container").css({position:"fixed","max-width":"27.777777%",width:"27.777777%"}):"95px"===$(".order-form-container").css("width")&&$(".order-form-container").css({position:"fixed",width:"95px"})),$(this).scrollTop()<b&&($(".order-form-container").width()>95?$(".order-form-container").css({position:"absolute","max-width":"33.333333%",width:"33.333333%"}):"95px"===$(".order-form-container").css("width")&&$(".order-form-container").css({position:"absolute",width:"95px"}))})},render:function(){$(this.el).append(this.template()),$(".app-container").append(this.loaderTemplate());var a=[],b=new Parse.Query("itemType"),c=Parse.User.current();b.containedIn("accessBy",[c,c.get("globalUser")]),b.limit(1500),b.find(function(b){b.forEach(function(b){var c="";c=b.attributes.Manufacturer,a.push(c)});var c=[];$.each(a,function(a,b){-1===$.inArray(b,c)&&c.push(b)}),c.forEach(function(a){$(".manufacturers").append("<option class='manufacturer order-manufacturer col-md-2 btn-default btn' name='"+a+"'>"+a+"</option")})})},loader:function(){$(".loading-cover").css("opacity",0),$(".chamber-loader").css("opacity",0),setTimeout(function(){$(".loading-cover").remove(),$(".chamber-loader").remove()},220)},jankyAddCustomer:function(){{var a=router.currentView.shoppingCart.customer.attributes.Company?router.currentView.shoppingCart.customer.attributes.Company:"";router.currentView.shoppingCart.customer.attributes.Address1?router.currentView.shoppingCart.customer.attributes.Address1:"",router.currentView.shoppingCart.customer.attributes.City?router.currentView.shoppingCart.customer.attributes.City:"",router.currentView.shoppingCart.customer.attributes.State?router.currentView.shoppingCart.customer.attributes.State:""}$(".app-container").prepend('<div class="shopping-cart-bound"></div>'),$(".page-title").text(a)},toggleCart:function(){var a=this;$(".order-form-container").hasClass("closed-cart")?(setTimeout(function(){$(".order-form-container").css({width:"33.33333333%",height:"auto"}),$(".merchant-info").css({height:"auto",overflow:"visible"})},300),setTimeout(function(){$(".order-form-container").css("overflow","visible"),$(".confirm-order-button").css("display","block"),$(".item-list-bound").css("display","block"),$(".order-hr").css("display","block"),$(".btn-holder").css("display","block")},500),$(".order-form-container").css("background","#FFFFFF"),$(".order-form-container").css("min-height","668px"),$(".order-form-container").removeClass("closed-cart"),$(".fa-chevron-left").addClass("fa-chevron-right").removeClass("fa-chevron-left"),0===router.currentView.shoppingCart.cart.length&&$(".confirm-order-button").attr("disabled",!0).text("NO ITEMS SELECTED")):0==$(".order-form-container").hasClass("closed-cart")&&(a.addToOrder(),0!=router.currentView.shoppingCart.cart.length&&$(".order-form-container").css("background","#00BE80"),setTimeout(function(){$(".order-form-container").css({width:"95px",height:"54px","min-height":"0px"}),$(".merchant-info").css({height:"0px",overflow:"hidden"})},300),setTimeout(function(){$(".confirm-order-button").css("display","none"),$(".item-list-bound").css("display","none"),$(".order-hr").css("display","none"),$(".btn-holder").css("display","none")},400),$(".order-form-container").css("overflow","hidden"),$(".order-form-container").addClass("closed-cart"),$(".fa-chevron-right").addClass("fa-chevron-left").removeClass("fa-chevron-right"))},swapConfirmView:function(){_.each($(".order-item"),function(a){$(a).attr("disabled",!0)}),_.each($(".shopping-cart-item"),function(a){$(a).fadeOut()}),$(".confirm-order-button").fadeOut(),$(".item-list-bound").remove(),$(".item-total-bound").remove(),setTimeout(function(){$(".order-form-container").append(new ConfirmOrderView({customer:router.currentView.shoppingCart.customer,items:router.currentView.shoppingCart.cart}))},200),this.sumItemCost()},addToOrder:function(){_.each($(".order-item"),function(a){$(a).attr("disabled",!1)}),_.each($(".shopping-cart-item"),function(a){$(a).fadeIn()}),$(".confirm-order-button").fadeIn(),$(".item-list-bound").fadeOut(),$(".item-total-bound").fadeOut(),$(".btn-holder").fadeOut(),setTimeout(function(){$(".item-list-bound").remove(),$(".item-total-bound").remove(),$(".btn-holder").remove(),$(".cart-items-header").remove()},300)},itemTypeDetail:function(a){var b=this;$(".list").html("");var c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.equalTo("typeName",a.currentTarget.innerHTML),c.first({success:function(a){var c=new Parse.Query("itemInstance");c.equalTo("itemType",a),c.equalTo("itemInstanceCode",void 0),c.each(function(a){$(".list").append(b.listItemDetailTemplate({item:a.attributes}))})},error:function(a){console.log(a)}})},getAllItemTypes:function(){var a=this;$(".list").html("");var b=0,c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.limit(1500),c.find(function(c){c.forEach(function(c){b+=1,c.attributes.Archived===!1&&c.attributes.Deleted===!1&&$(".list").append(a.listItemTemplate({itemType:c}))})}).then(function(){a.countInventory(),a.countBackorders(),a.listIt(),a.loader()})},countInventory:function(){var a=this,b=[],c=new Parse.Query("itemInstance");c.limit(1500),c.equalTo("shop",Parse.User.current()),c.find(function(a){for(i=0;i<a.length;i++)a[i].attributes&&b.push(a[i].attributes.UPC)}).then(function(){a.sortObject(b),_.each($(".all-inventory-number"),function(a){for(i=0;i<Object.keys(result).length;i++)if($(a).attr("id")===Object.keys(result)[i]){var b=Object.keys(result)[i],c=result[b];$(a).text(c)}})})},countBackorders:function(){var a=this,b=[],c=[],d=new Parse.Query("backOrder");d.equalTo("item",void 0),d.limit(1500),d.equalTo("shop",Parse.User.current()),d.find(function(d){for(i=0;i<d.length;i++)b.push(d[i].attributes.itemType);a.sortObject(c)}).then(function(){a.sortObject(b),_.each($(".backorder-number"),function(a){for(i=0;i<Object.keys(result).length;i++)if($(a).attr("id")===Object.keys(result)[i]){var b=Object.keys(result)[i],c=result[b];$(a).text(c)}})})},sortObject:function(b){for(a=b,result={},i=0;i<a.length;++i)result[a[i]]||(result[a[i]]=0),++result[a[i]];return result},listIt:function(){{var a={valueNames:["product-id","item-type","item-description","all-inventory-number","backorder-number","item-caliber"]};new List("inventory-search",a)}},activeManufacturer:function(){$(".manufacturer").removeClass("active"),$(event.target).addClass("active"),$(".center-number").text(""),$(".center-number").text($(".manufacturers option:selected").text()),$(".list").html("");var a=$(".manufacturers option:selected").text(),b=this,c=[];"Select Manufacturer"===a&&($(".center-number").text(""),this.getAllItemTypes(),this.listIt());var d=new Parse.Query("itemType"),e=Parse.User.current();d.containedIn("accessBy",[e,e.get("globalUser")]),d.limit(1e3),d.find(function(d){d.forEach(function(d){return d.attributes.Manufacturer==a&&d.attributes.Archived===!1&&($(".list").append(b.listItemTemplate({itemType:d})),c.push(d)),c});var e=[],f=new Parse.Query("itemInstance");for(f.limit(1e3),f.find(function(a){var b=[];return a.forEach(function(a){b.push(a.attributes.UPC)}),b}),i=0;i<c.length;i++)_.each(c[i],function(){e.push(c[i])})}).then(function(){b.countInventory(),b.countBackorders(),b.listIt()})},addItemOrder:function(a){if(0==$(a).attr("disabled")||void 0==$(a).attr("disabled")){var b=this,c=!1;$(".order-form-container").css("border","1px solid #00BE80"),$(".confirm-order-button").attr("disabled",!1).text("CHECK OUT"),$(event.target).css("border","1px solid #00BE80");var d=a.currentTarget.parentElement.parentElement.children[1].innerHTML;if($(".order-modal-button").remove(),$(".app-container").append(b.orderButtonTemplate()),router.currentView.shoppingCart.cart.forEach(function(d){d[0]==a.currentTarget.getAttribute("value")&&(c=!0,d[1]+=1,$(".synopsis-total-number").text(router.currentView.shoppingCart.cart.length),b.renderCart(),b.getCart())}),0==c){var e=[a.currentTarget.getAttribute("value"),1,d];router.currentView.shoppingCart.cart.push(e),$(".synopsis-total-number").text(router.currentView.shoppingCart.cart.length),b.renderCart(),b.getCart()}}},getCart:function(){{var a=this,b=router.currentView.shoppingCart.cart,c=[];parseInt($(".synopsis-price-number").text())}for(i=0;i<b.length;i++){var d=new Parse.Query("itemType");d.equalTo("objectId",b[i][0]),d.find({success:function(b){var d=b[0].attributes.DealerPrice.length,e=b[0].attributes.DealerPrice.slice(2,d);c.push(e),a.sumItemCost()},error:function(a){console.log(a)}})}},orderModal:function(){$(".order-form-container").css("display","block")&&$(".modal-cover").css("display","block")?($(".order-form-container").css("display","none"),$(".modal-cover").css("display","none")):($(".order-form-container").css("display","block"),$(".modal-cover").css("display","block"))},renderCart:function(){$(".order-items-list").html("");var a=this;router.currentView.shoppingCart.cart.forEach(function(b){$(".order-items-list").prepend(a.shoppingCartTemplate({item:b}))}),$(".order-hr").css("visibility","visible"),$(".confirm-order-button").css("visibility","visible")},sumItemCost:function(){var a=[],b=0,c=$("#shipping option:first").attr("selected",!0).val();isNaN($("#shipping option:selected").val())||(c=Number($("#shipping option:selected").val())),_.each($(".total-item-cost"),function(d){a.push($(d).text().substring(1)),b+=Number($(d).text().substring(1)),$(".sum-div").text(""+b+c)})},confirmCart:function(){confirm("Are you sure?")&&($(".item-list-bound").html(""),$(".cart-items.header").html(""),$(".item-total-bound").html(""),new FinalOrder(this.cart))}}),ConfirmOrderView=Parse.View.extend({events:{"click .update-total":"updatePage","click .confirm-list":"confirmCart"},template:_.template($(".confirm-order-view").text()),itemInstanceTemplate:_.template($(".confirm-order-item-instance-view").text()),itemTotalTemplate:_.template($(".update-order-total-view").text()),initialize:function(){var a=this;$(".order-items-list").html(""),setTimeout(function(){$(".order-items-list").html(a.el),a.render()},400),setTimeout(function(){a.sumItemCost()},500)},render:function(){({Company:this.options.customer.attributes.Company?this.options.customer.attributes.Company:"",FirstName:this.options.customer.attributes.FirstName?this.options.customer.attributes.FirstName:"",LastName:this.options.customer.attributes.LastName?this.options.customer.attributes.LastName:"",Address1:this.options.customer.attributes.Address1?this.options.customer.attributes.Address1:"",City:this.options.customer.attributes.City?this.options.customer.attributes.City:"",State:this.options.customer.attributes.State?this.options.customer.attributes.State:"",Zip:this.options.customer.attributes.Zip?this.options.customer.attributes.Zip:"",email:this.options.customer.attributes.email?this.options.customer.attributes.email:"",Phone:this.options.customer.attributes.Phone?this.options.customer.attributes.Phone:""});$(this.el).append(this.template()),this.getCart(),this.hideOptionInput()},renderCart:function(a){var b=this;$(".item-instance-bound").html(""),a.forEach(function(a){$(".item-instance-bound").append(b.itemInstanceTemplate({item:a}))})},getCart:function(){var a=this;this.cart=[];var b=new Promise(function(b){a.options.items.forEach(function(c,d,e){var f=new Parse.Query("itemType");f.equalTo("objectId",c[0]),f.find({success:function(b){b[0].attributes.quan=c[1],b[0].attributes.id=b[0].id,a.cart.push(b[0].attributes)},error:function(a){console.log(a)}}).then(function(){d+1===e.length&&b(a.cart)})})});b.then(function(){var b=setInterval(function(){a.cart.length===a.options.items.length&&(a.renderCart(a.cart),a.showItemSum(a.sumItemCost()),clearInterval(b))},100)})},sumItemCost:function(){var a=[],b=0,c=$("#shipping option:first").attr("selected",!0).val();isNaN($("#shipping option:selected").val())||(c=Number($("#shipping option:selected").val())),_.each($(".total-item-cost"),function(d){a.push($(d).text().substring(1)),b+=Number($(d).text().substring(1)),$(".total-text").text(b+c)})},showItemSum:function(a){var b=$("#shipping").val();if(10==b||20==b){this.cart.shipping=b;var c=parseInt($("#shipping").val())+parseInt(a);$(".cart-total").html(this.itemTotalTemplate({sum:c}))}else if("Other"==b){this.cart.shipping=parseInt($("#other_cost").val());var c=parseInt($("#other_cost").val())+parseInt(a);$(".cart-total").html(this.itemTotalTemplate({sum:c}))}},itemDealerSum:function(){var a=0;for(i=0;i<$(".total-item-cost-you").length;i+=1)if(a+=parseInt($(".total-item-cost-you")[i].innerHTML),i===$(".total-item-cost-you").length-1)return a},updatePage:function(){var a=[];$(".cart-item-instance").each(function(b,c){a.push([c.getAttribute("id"),c.value])}),this.updateCart(a)},updateCart:function(a){var b=this;this.options.items.forEach(function(b){a.forEach(function(a){b[0]==a[0]&&(b[1]=parseInt(a[1]))})}),setTimeout(function(){b.initialize()},100)},confirmCart:function(){confirm("Are you sure?")&&($(".item-list-bound").html(""),$(".cart-items.header").html(""),$(".item-total-bound").html(""),new FinalOrder(this.cart))},hideOptionInput:function(){$(function(){$("#other_cost").hide(),$("#shipping").change(function(){"Other"==$(this).find("option:selected").val()?$("#other_cost").show():$("#other_cost").hide()}),$("#other_cost").keyup(function(a){var b=$("#shipping").find("option:selected");"Other"==b.val()&&(a.preventDefault(),$(b).html($("#other_cost").val()))}),$("#form_id").submit(function(){var a=$("#shipping").find("option:selected");"Other"==a.val()&&a.val($("#other_cost").val())})})}}),FinalOrder=Parse.View.extend({events:{},template:_.template($(".final-order-instance-view").text()),initialize:function(){$(".item-list-bound").html(this.el),this.getCustomer(),this.render()},createOrder:function(a){var b=this,c=0,d=new Parse.Query("order");d.count({success:function(a){c=a}}).then(function(){var d=Parse.Object.extend("order");b.order=new d,b.order.set({customer:a,orderNumber:parseInt(c),"void":!1,shop:Parse.User.current(),shipping:b.options.shipping,fulfilled:!1}).save(),b.getItems()})},getCustomer:function(){var a=this,b=router.currentView.shoppingCart.customer.id,c=new Parse.Query("customer");c.equalTo("objectId",b),c.first({success:function(b){a.customer=b,a.createOrder(b)},error:function(a){console.log(a)}})},render:function(){$(this.el).append(this.template())},getItems:function(){var a=this;this.options.forEach(function(b){var c=b.quan,d=new Parse.Query("itemInstance");d.include("itemType"),d.equalTo("UPC",b.UPC),d.equalTo("itemInstanceCode",0),d.find({success:function(b){b.forEach(function(b){c>0&&(b.set("itemInstanceCode",2),b.set("order",a.order),b.save(),c-=1)})},error:function(a){console.log(a)}}).then(function(){setTimeout(function(){if(c>0)for(var d=c;d>0;d-=1)a.makeBackorder(b.UPC,a.order),c-=1,0===c&&router.navigate("#order/"+a.order.id,{trigger:!0,replace:!0})},200)})})},grabInstance:function(a){a.set("itemInstanceCode",2),a.set("order",this.order),a.save()},makeBackorder:function(a,b){var c=new Parse.Query("itemType");c.equalTo("UPC",a),c.first().then(function(c){var d=Parse.Object.extend("backOrder"),e=new d;e.save({itemType:a,itemParent:c,order:b,shop:Parse.User.current()})})}}),FrontPage=Parse.View.extend({events:{"click .submit-sign-in":"signIn","keydown .password-input":"enterSignIn","click .close":"closeAlert"},template:_.template($(".dashboard-view").text()),titleTemplate:_.template($(".page-title").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){$(".landing-page-here").html(""),$(".app-container").html(this.el),this.render()},render:function(){$(this.el).append(this.template()),console.log(this.el),$(".put-title-here").css("display","block"),$(".app-container").css("display","block"),$(".alan-arms-pos").css("display","block"),$(".put-title-here").append(this.titleTemplate()),$(".alan-arms-pos").append(this.navbarTemplate),$(".page-title").text("SIGN IN")},signIn:function(){this.logIn()},enterSignIn:function(a){var b=a.which;13==b&&this.signIn()},logIn:function(){var a=$(".username-input").val(),b=$(".password-input").val(),c=!0;_.each($(".sign-in-field"),function(a){return $(a).val().length<1?(console.log("it's empty, foo!"),void console.log(c)):(c=!1,console.log(c),c)}),0==c?Parse.User.logIn(a,b,{success:function(){router.swap(new ScanItem),console.log("logged in")},error:function(){$(".username-input").val(""),$(".password-input").val(""),$(".username-input").focus(),$(".alert-danger").css({visibility:"visible",height:"auto","margin-bottom":"20px",padding:"15px"}),$(".alert-danger").html('<button type="button" class="close closeAlert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Oh snap!<span class="alert-link">Make sure you filled out everything </span>and try submitting again.'),_.each($(".sign-in-field"),function(a){$(a).css("border","1px solid red")}),$(".alert-danger").html(""),$(".alert-danger").html('<button type="button" class="close closeAlert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Oh Snap!, it looks like your <span class="alert-link">username</span> or <span class="alert-link">password</span> is incorrect.')}}):($(".alert-danger").css({visibility:"visible",height:"auto","margin-bottom":"20px",padding:"15px"}),_.each($(".sign-in-field"),function(a){$(a).css("border","1px solid red")}))},closeAlert:function(){$(".alert-danger").css({visibility:"hidden",height:"0px","margin-bottom":"0px",padding:"0px",overflow:"hidden"})}}),InventoryList=Parse.View.extend({events:{"click span.item-type":"itemTypeDetail","change .manufacturers":"activeManufacturer","click .full-inventory":"showFullInventory","click .full-backorders":"showBackorderList","click .search-all-inventory":"getAllItemTypes","click .edit-items":"turnOnEdit","click .close":"closeEditInventoryItem","click .close-preview":"closeEditInventoryItem","click .save-item-changes":"saveItemChanges","click .edit-this-item":"editThisItem","click .filter-inventory":"openFilterOptions","click .filter-name":"filterName","click .archive-this-item":"archiveThis","click .delete-this-item":"deleteThis","click .list-archived-items":"listArchivedItems","click .list-backordered-items":"showBackorders","click .list-instock-items":"showInStock"},template:_.template($(".inventory-list-view").text()),listItemTemplate:_.template($(".inventory-list-item-view").text()),listItemDetailTemplate:_.template($(".inventory-list-detail-view").text()),titleTemplate:_.template($(".page-title").text()),editItemModal:_.template($(".edit-inventory-list-item-view").text()),loaderTemplate:_.template($(".loading-cover-template").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{var a=this;$("html, body").scrollTop(0),$(".progress-bar-body").html(""),$(".alan-arms-pos").html(this.navbarTemplate);var b=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(a){a.id==b?$(a).css("color","#ffffff"):$(a).css("color","#9d9d9d")}),$(".app-container").html(this.el),a.render()}$(".filter-info-popup").css("display","none"),this.getAllItemTypes(),this.sortInventoryTotals()},render:function(){$(this.el).append(this.template()),$(".put-title-here").html(this.titleTemplate()),$(".app-container").append(this.loaderTemplate()),$(".page-title").text("INVENTORY");var a=[],b=new Parse.Query("itemType"),c=Parse.User.current();b.containedIn("accessBy",[c,c.get("globalUser")]),b.limit(1500),b.find(function(b){b.forEach(function(b){var c="";c=b.attributes.Manufacturer,a.push(c)});var c=[];$.each(a,function(a,b){-1===$.inArray(b,c)&&c.push(b)}),c.forEach(function(a){$(".manufacturers").append("<option class='manufacturer col-md-2 btn-default btn' name='"+a+"'>"+a+"</option")})})},sortInventoryTotals:function(){},listIt:function(){{var a={valueNames:["product-id","item-type","item-description","all-inventory-number","backorder-number","item-caliber"]};new List("inventory-search",a)}},getAllItemTypes:function(){var a=this;
$(".loading-cover").css("opacity",1),$(".chamber-loader").css("opacity",1),$(".loading-cover").css("display","block"),$(".chamber-loader").css("display","block"),$(".list").html("");var b=0,c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.limit(1500),c.find(function(c){c.forEach(function(c){b+=1,c.attributes.Archived===!1&&c.attributes.Deleted===!1&&$(".list").append(a.listItemTemplate({itemType:c}))})}).then(function(){a.countInventory(),a.countBackorders(),a.listIt(),a.loader()})},countInventory:function(){var a=this,b=[],c=new Parse.Query("itemInstance");c.limit(1500),c.equalTo("shop",Parse.User.current()),c.find(function(a){for(i=0;i<a.length;i++)a[i].attributes&&b.push(a[i].attributes.UPC)}).then(function(){a.sortObject(b),_.each($(".all-inventory-number"),function(a){for(i=0;i<Object.keys(result).length;i++)if($(a).attr("id")===Object.keys(result)[i]){var b=Object.keys(result)[i],c=result[b];$(a).text(c)}})})},showBackorders:function(){_.each($(".list li"),function(a){parseInt($(a).children(".backorder-number").text())>0?$(a).removeClass("test-sort"):$(a).addClass("test-sort")})},showInStock:function(){_.each($(".list li"),function(a){parseInt($(a).children(".all-inventory-number").text())>0?$(a).removeClass("test-sort"):$(a).addClass("test-sort")})},countBackorders:function(){var a=this,b=[],c=[],d=new Parse.Query("backOrder");d.equalTo("item",void 0),d.limit(1500),d.equalTo("shop",Parse.User.current()),d.find(function(d){for(i=0;i<d.length;i++)b.push(d[i].attributes.itemType);a.sortObject(c)}).then(function(){a.sortObject(b),_.each($(".backorder-number"),function(a){for(i=0;i<Object.keys(result).length;i++)if($(a).attr("id")===Object.keys(result)[i]){var b=Object.keys(result)[i],c=result[b];$(a).text(c)}})})},sortObject:function(b){for(a=b,result={},i=0;i<a.length;++i)result[a[i]]||(result[a[i]]=0),++result[a[i]];return result},loader:function(){$(".loading-cover").css("opacity",0),$(".chamber-loader").css("opacity",0),setTimeout(function(){$(".loading-cover").css("display","none"),$(".chamber-loader").css("display","none")},220)},getManufacturers:function(){var a=[],b=new Parse.Query("itemType"),c=Parse.User.current();b.containedIn("accessBy",[c,c.get("globalUser")]),b.limit(1500),b.find(function(b){b.forEach(function(b){var c="";c=b.attributes.Manufacturer,a.push(c)});{var c=[];$.each(a,function(a,b){-1===$.inArray(b,c)&&c.push(b)}.then(function(){return c}))}})},itemTypeDetail:function(a){var b=this;$(".inventory-list-detail-bound").html("");var c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.equalTo("typeName",a.currentTarget.innerHTML),c.first({success:function(a){var c=new Parse.Query("itemInstance");c.equalTo("itemType",a),c.equalTo("itemInstanceCode",void 0),c.each(function(a){$(".inventory-list-detail-bound").append(b.listItemDetailTemplate({item:a.attributes}))})},error:function(a){console.log(a)}})},newItemView:function(a){new InventoryItemView({el:$(".inventory-list-item-bound"),model:a})},activeManufacturer:function(){$(".manufacturer").removeClass("active"),$(event.target).addClass("active"),$(".center-number").text(""),$(".center-number").text($(".manufacturers option:selected").text()),$(".list").html("");var a=$(".manufacturers option:selected").text(),b=this,c=[];"Select Manufacturer"===a&&($(".center-number").text(""),this.getAllItemTypes(),this.listIt());var d=new Parse.Query("itemType"),e=Parse.User.current();d.containedIn("accessBy",[e,e.get("globalUser")]),d.limit(1e3),d.find(function(d){d.forEach(function(d){return d.attributes.Manufacturer==a&&d.attributes.Archived===!1&&($(".list").append(b.listItemTemplate({itemType:d})),c.push(d)),c});var e=[],f=new Parse.Query("itemInstance");for(f.limit(1e3),f.find(function(a){var b=[];return a.forEach(function(a){b.push(a.attributes.UPC)}),b}),i=0;i<c.length;i++)_.each(c[i],function(){e.push(c[i])})}).then(function(){b.countInventory(),b.countBackorders(),b.listIt()})},showFullInventory:function(){router.navigate("inventory/fullstock",{trigger:!0})},showBackorderList:function(){router.navigate("inventory/backorders",{trigger:!0})},turnOnEdit:function(){$(".edit-this-item").toggle()},editThisItem:function(){$(".inventory-item-modal-container").html("");var a=this,b=$(event.target).attr("name"),c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.equalTo("UPC",b),c.first({success:function(b){$(".inventory-item-modal-container").append(a.editItemModal({itemType:b,thisAttribute:b.attributes}));var c=[],d=new Parse.Query("itemType"),e=Parse.User.current();d.containedIn("accessBy",[e,e.get("globalUser")]),d.limit(1500),d.find(function(a){a.forEach(function(a){var b="";b=a.attributes.Manufacturer,c.push(b)});var b=[];$.each(c,function(a,c){-1===$.inArray(c,b)&&b.push(c)}),b.forEach(function(a){$(".item-manufacturers-list").append("<option class='manufacturer col-md-2 btn-default btn' name='"+a+"'>"+a+"</option")})}),setTimeout(function(){$(".item-manufacturers-list").val(b.attributes.Manufacturer)},400)},error:function(a){console.log(a)}})},closeEditInventoryItem:function(){$(".inventory-item-modal-container").html(""),$("body").removeClass("modal-open"),$(".fade").removeClass("in"),$(".modal").css("display","none")},openFilterOptions:function(){$(".filter-options button").toggle("button-toggle"),$(".filter-options-container").hasClass("filters-toggle")?setTimeout(function(){$(".filter-options-container").toggleClass("filters-toggle")},150):($(".filter-options-container").toggleClass("filters-toggle"),$(".pointer").css("left",$(".filter-inventory").offset().left-parseInt($(".filter-inventory").css("width"))%2-$(".app-container").offset().left)),$(".pointer").toggleClass("pointer-toggle")},filterInfo:function(){setTimeout(function(){$(".filter-info").tooltip("hide")},1e3)},stopFilterInfo:function(){$(".filter-info-popup").fadeOut("fast")},filterName:function(){var a=$(event.target).attr("id");$(".search-inventory").val(a),$(function(){setTimeout(function(){e=$.Event("keyup"),e.keyCode=49,$(".search-inventory").keypress(e)},900)}),$(".search-inventory").focus()},saveItemChanges:function(){var a=this,b=new Parse.Query("itemType"),c=Parse.User.current();b.containedIn("accessBy",[c,c.get("globalUser")]),b.equalTo("objectId",$(event.target).data("id")),b.limit(1500),b.first({success:function(b){b.set({Caliber:0!=$(".caliber-input").val().length?$(".caliber-input").val():b.attributes.Caliber,ItemNumber:0!=$(".item-number-input").val().length?$(".item-number-input").val():b.attributes.ItemNumber,Manufacturer:$(".item-manufacturers-list").val()?$(".item-manufacturers-list").val():b.attributes.Manufacturer,Model:0!=$(".model-input").val().length?parseInt($(".model-input").val()):b.attributes.Model,UPC:0!=$(".upc-input").val().length?$(".upc-input").val():b.attributes.UPC,Cost:0!=$(".cost-input").val().length?$(".cost-input").val():b.attributes.Cost,DealerPrice:0!=$(".dealer-price-input").val().length?$(".dealer-price-input").val():b.attributes.DealerPrice,MSRP:0!=$(".msrp-input").val().length?$(".msrp-input").val():b.attributes.MSRP,Description:0!=$(".description-input").val().length?$(".description-input").val():b.attributes.Description}).save(),$(".list").html(""),a.closeEditInventoryItem(),a.activeManufacturer()},error:function(a){console.log(a)}})},archiveThis:function(){var a=this,b=new Parse.Query("itemType"),c=Parse.User.current();b.containedIn("accessBy",[c,c.get("globalUser")]),b.limit(1500),b.equalTo("objectId",$(event.target).data("id")),b.first({success:function(b){b.set("Archived",!0).save(),a.closeEditInventoryItem(),a.activeManufacturer(),$(".list").html(""),a.closeEditInventoryItem(),a.activeManufacturer()},error:function(a){console.log(a)}})},listArchivedItems:function(){$(".list").html("");var a=this,b=0,c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.limit(1500),c.find(function(c){c.forEach(function(c){b+=1,c.attributes.Archived===!0&&$(".list").append(a.listItemTemplate({itemType:c}))})}).then(function(){a.listIt()})},deleteThis:function(){var a=this,b=new Parse.Query("itemType"),c=Parse.User.current();b.containedIn("accessBy",[c,c.get("globalUser")]),b.limit(1500),b.equalTo("objectId",$(event.target).data("id")),b.first({success:function(b){b.set("Deleted",!0).save(),a.closeEditInventoryItem(),a.activeManufacturer(),$(".list").html(""),a.closeEditInventoryItem(),a.activeManufacturer()},error:function(a){console.log(a)}})}}),FullStockList=Parse.View.extend({events:{"click .delete-item":"deleteItem"},template:_.template($(".full-stock-list-template").text()),instanceTemplate:_.template($(".stock-list-instance-template").text()),initialize:function(){null===Parse.User.current()==!0?(window.location.href="#sign-in",router.swap(new FrontPage)):($(".app-container").html(this.el),this.render())},render:function(){$(this.el).append(this.template()),this.getItems()},getItems:function(){var a=this,b=new Parse.Query("itemInstance");b.equalTo("itemInstanceCode",0),b.each(function(b){$(".inventory-list-bound").append(a.instanceTemplate({item:b.attributes,model:b}))})},deleteItem:function(a){var b=$(a.currentTarget).attr("id"),c=new Parse.Query("itemInstance");c.equalTo("objectId",$(a.currentTarget).attr("id")),c.first({success:function(a){a.destroy({success:function(){$("."+b).remove()},error:function(a){console.log(a)}})},error:function(a){console.log(a)}})}}),FullBackorderList=Parse.View.extend({events:{"click .delete-item":"deleteItem"},template:_.template($(".full-backorder-list-template").text()),instanceTemplate:_.template($(".backorder-list-instance-template").text()),initialize:function(){null===Parse.User.current()==!0?(window.location.href="#sign-in",router.swap(new FrontPage)):($(".app-container").html(this.el),this.render())},render:function(){$(this.el).append(this.template()),this.getItems()},getItems:function(){var a=this,b=new Parse.Query("backOrder");b.include("order"),b.each(function(b){var c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.equalTo("UPC",b.attributes.itemType),c.first({success:function(c){$(".backorder-list-bound").append(a.instanceTemplate({item:b.attributes,model:b,itemType:c.attributes,order:b.attributes.order}))}})})},deleteItem:function(a){var b=($(a.currentTarget).attr("id"),new Parse.Query("backOrder"));b.equalTo("objectId",$(a.currentTarget).attr("id")),b.include("order"),b.first({success:function(){},error:function(a){console.log(a)}})}}),OrderList=Parse.View.extend({events:{"click .order-instance":"orderDetail","click .export-orders":"exportOrders","click .oldest-to-newest":"oldToNewOrders","click .newest-to-oldest":"newToOldOrders","click .filter-inventory":"openFilterOptions","click .fulfilled-orders":"showFulfilledOrders","click .backordered-orders":"showBackorderedOrders","click .pending-orders":"showPendingOrders","click .all-orders":"showAllOrders"},template:_.template($(".order-list-view").text()),orderInstanceTemplate:_.template($(".order-list-item-view").text()),orderDetailTemplate:_.template($(".order-detail-view").text()),titleTemplate:_.template($(".page-title").text()),viewOrderInvoice:_.template($(".final-order-instance-view").text()),customerTemplate:_.template($(".customer-info-order-template").text()),itemInstanceTemplate:_.template($(".customer-info-order-items-template").text()),backorderInstanceTemplate:_.template($(".customer-info-backorder-template").text()),totalTemplate:_.template($(".sales-order-template-total").text()),loaderTemplate:_.template($(".loading-cover-template").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$("html, body").scrollTop(0),$(".progress-bar-body").html(""),$(".alan-arms-pos").html(this.navbarTemplate);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),$(".app-container").html(this.el),this.render(),this.filterBackorderStatus(),$(".modal").css("display","none !important")}},render:function(){var a=this;$(this.el).append(this.template()),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("ORDERS"),$(".app-container").append(this.loaderTemplate()),this.getOrders(),a.showAllOrders(),setTimeout(function(){a.listIt()},220)},loader:function(){$(".loading-cover").css("opacity",0),$(".chamber-loader").css("opacity",0),setTimeout(function(){$(".loading-cover").remove(),$(".chamber-loader").remove()},220)},filterBackorderStatus:function(){var a=[],b=[],c=new Parse.Query("order");c.limit(1500),c.equalTo("shop",Parse.User.current()),c.include("customer"),c.find({success:function(b){for(i=0;i<b.length;i++)b[i]&&a.push(b[i].id)},error:function(){console.log("there was a testing error")}});var d=new Parse.Query("backOrder");d.limit(1500),d.equalTo("item",void 0),d.find({success:function(a){for(i=0;i<a.length;i++)a[i].attributes.order&&b.push(a[i].attributes.order.id)}}).then(function(){var c=[];setTimeout(function(){var d=b.filter(function(a,b,c){return c.indexOf(a)===b}),e=a.filter(function(a,b,c){return c.indexOf(a)===b});_.each(e,function(a){for(i=0;i<d.length;i++)a==d[i]&&c.push(a)});$(".order-fulfilled");_.each($(".order-instance"),function(a){for(i=0;i<c.length;i++)$(a).attr("id")===c[i]&&($(a).children(".btn-default").addClass("backordered-order"),$(a).children(".btn-default").text("BACKORDER"))})},100)})},getOrders:function(a){var b=this,a=[],c=new Parse.Query("order");c.include("customer"),c.equalTo("shop",Parse.User.current()),c.find(function(c){a.push(c),_.each(c,function(a){a.attributes["void"]===!1&&$(".list").append(b.orderInstanceTemplate({order:a,customer:a.attributes.customer}));var c="#"+a.id;a.attributes.fulfilled===!0?($(c.toString()).children(".btn-default").addClass("fulfilled-order"),$(c.toString()).children(".btn-default").text("FULFILLED")):($(c.toString()).children(".btn-default").removeClass("fulfilled-order"),$(c.toString()).children(".btn-default").text("PENDING"))})}).then(function(){{var a=$(".list").children().length,c=$(".list").children()[a];$(".list").children()[0]}$(c).css("border-bottom","1px solid #ccc"),$(".order-container").css("display","none"),b.loader()})},listIt:function(){{var a={valueNames:["order-number","order-customer","order-date"]};new List("orders-search",a)}},oldToNewOrders:function(){var a=this,b=[];$(".newest-to-oldest").toggle(),$(".oldest-to-newest").toggle(),$(".order-container").remove();var c=new Parse.Query("order");c.include("customer"),c.equalTo("shop",Parse.User.current()),c.each(function(c){b.push(c),c.attributes["void"]===!1&&$(".list").prepend(a.orderInstanceTemplate({order:c,customer:c.attributes.customer}))}).then(function(){})},newToOldOrders:function(){var a=this,b=[];$(".newest-to-oldest").toggle(),$(".oldest-to-newest").toggle(),$(".order-container").remove();var c=new Parse.Query("order");c.equalTo("shop",Parse.User.current()),c.include("customer"),c.each(function(c){b.push(c),c.attributes["void"]===!1&&$(".list").append(a.orderInstanceTemplate({order:c,customer:c.attributes.customer}))}).then(function(){})},orderDetail:function(a){var b=this;$(".order-detail-bound").html("");var c=new Parse.Query("order");c.equalTo("shop",Parse.User.current()),c.include("customer"),c.equalTo("objectId",a.currentTarget.id),c.first(function(a){var c=new Parse.Query("itemInstance");c.equalTo("shop",Parse.User.current()),c.include("itemType"),c.equalTo("order",a),c.each(function(a){$(".order-detail-bound").append(b.orderDetailTemplate({item:a,itemType:a.attributes.itemType}))})})},printOrderHistory:function(){$(".order-detail-bound").html("")},exportOrders:function(){var a=[],b=new Parse.Query("order");b.equalTo("shop",Parse.User.current()),b.include("customer"),b.each(function(b){a.push(b)}).then(function(){})},openFilterOptions:function(){$(".filter-options button").toggle("button-toggle"),$(".filter-options-container").hasClass("filters-toggle")?setTimeout(function(){$(".filter-options-container").toggleClass("filters-toggle")},150):($(".filter-options-container").toggleClass("filters-toggle"),$(".pointer").css("left",$(".filter-inventory").offset().left-parseInt($(".filter-inventory").css("width"))%2-$(".app-container").offset().left)),$(".pointer").toggleClass("pointer-toggle")},showFulfilledOrders:function(){$(".list").fadeOut("fast"),$(".list").fadeIn("fast"),$(".page-title").text("FULFILLED ORDERS"),setTimeout(function(){_.each($(".order-instance").children(".btn-default"),function(a){$(a).hasClass("fulfilled-order")?$(a).parent().parent().removeClass("display-none"):$(a).hasClass("fulfilled-order")===!1&&$(a).parent().parent().addClass("display-none")})},120),this.listIt()},showBackorderedOrders:function(){$(".list").fadeOut("fast"),$(".list").fadeIn("fast"),$(".page-title").text("BACKORDERS"),setTimeout(function(){_.each($(".order-instance").children(".btn-default"),function(a){$(a).hasClass("backordered-order")?$(a).parent().parent().removeClass("display-none"):$(a).hasClass("backordered-order")===!1&&$(a).parent().parent().addClass("display-none")})},120)},showPendingOrders:function(){$(".list").fadeOut("fast"),$(".list").fadeIn("fast"),$(".page-title").text("PENDING ORDERS"),setTimeout(function(){_.each($(".order-instance").children(".btn-default"),function(a){$(a).hasClass("backordered-order")||$(a).hasClass("fulfilled-order")?$(a).parent().parent().addClass("display-none"):$(a).parent().parent().removeClass("display-none")})},120)},showAllOrders:function(){$(".list").fadeOut("fast"),$(".list").fadeIn("fast"),$(".page-title").text("ALL ORDERS"),setTimeout(function(){_.each($(".order-instance"),function(a){$(a).parent().css("display","block"),$(a).css("display","block")})},320)}}),PlaceOrder=Parse.View.extend({events:{"click .customer-state":"getCustomer","click .states-bread":"showStates","click .customers-bread":"showCustomers","click .merchant":"showCustomer","click .accept-merchant":"acceptMerchant","click .cancel-merchant":"showStates","click .confirm-order-button":"swapConfirmView"},template:_.template($(".place-order-view").text()),customersTemplate:_.template($(".customer-by-state-view").text()),customerTemplate:_.template($(".customer-order-view").text()),titleTemplate:_.template($(".page-title").text()),navbarTemplate:_.template($(".navbar-template").text()),shoppingCart:{customer:{},cart:[]},initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$("html, body").scrollTop(0),$(".alan-arms-pos").html(this.navbarTemplate);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),$(".app-container").html(this.el),this.render()}},render:function(){$(this.el).append(this.template()),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("PLACE ORDER"),this.showStates()},getCustomer:function(a){var b=this,c=a.currentTarget.innerHTML;this.merchants=[];var d=new Parse.Query("customer");d.equalTo("State",c),d.find({success:function(a){a.forEach(function(a){b.merchants.push(a)}),b.showCustomers()},error:function(){}})},showCustomers:function(){var a=this;$(".select-customer").html('<div class="crumbs"><span class="states-bread">states</span> > customers</div>'),$(".order-directions").text("Select the customer to create order"),this.merchants.forEach(function(b,c){$(".select-customer").append(a.customersTemplate({merchant:b,index:c}))})},showCustomer:function(a){$(".order-directions").text("Please confirm customer selection"),$(".select-customer").html('<div class="crumbs"><span class="states-bread">states</span> > <span class="customers-bread">customers</span> > '+a.currentTarget.innerHTML+"</div>");var b=a.currentTarget.id;this.shoppingCart.customer=this.merchants[b],$(".select-customer").append(this.customerTemplate({merchant:this.shoppingCart.customer}))},acceptMerchant:function(){$(".order-directions").text("Please select manufacturer and item types for order"),this.inventoryList=new OrderInventoryList},swapConfirmView:function(){router.swap(new ConfirmOrderView({customer:this.shoppingCart.customer,items:this.shoppingCart.cart}))}}),OrderInventoryList=Parse.View.extend({events:{"click span.item-type":"itemTypeDetail","click .manufacturer":"activeManufacturer","click button.order-item":"addItemOrder"},template:_.template($(".order-inventory-list-view").text()),listItemTemplate:_.template($(".order-inventory-list-item-view").text()),listItemDetailTemplate:_.template($(".order-inventory-list-detail-view").text()),shoppingCartTemplate:_.template($(".order-shopping-cart-view").text()),initialize:function(){$(".app-merchant-bound").html(this.el),this.render()},render:function(){$(this.el).append(this.template())},itemTypeDetail:function(a){var b=this;$(".inventory-list-detail-bound").html("");var c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.equalTo("typeName",a.currentTarget.innerHTML),c.first({success:function(a){var c=new Parse.Query("itemInstance");c.equalTo("itemType",a),c.equalTo("itemInstanceCode",void 0),c.each(function(a){$(".inventory-list-detail-bound").append(b.listItemDetailTemplate({item:a.attributes}))})},error:function(a){console.log(a)}})},activeManufacturer:function(a){$(".manufacturer").removeClass("active"),$(event.target).addClass("active"),$(".center-number").text(""),$(".center-number").text($(event.target).text()),$(".inventory-list-item-bound").html("");var b=a.currentTarget.attributes.name.value,c=this,d=new Parse.Query("itemType"),e=Parse.User.current();d.containedIn("accessBy",[e,e.get("globalUser")]),d.limit(1e3),d.equalTo("Manufacturer",b),d.find(function(a){a.forEach(function(a){a.attributes.Manufacturer==b&&$(".inventory-list-item-bound").append(c.listItemTemplate({itemType:a}))})})},addItemOrder:function(a){var b=this,c=!1,d=a.currentTarget.parentElement.parentElement.children[1].innerHTML;if(router.currentView.shoppingCart.cart.forEach(function(d){d[0]==a.currentTarget.getAttribute("value")&&(c=!0,d[1]+=1,b.renderCart())}),0==c){var e=[a.currentTarget.getAttribute("value"),1,d];router.currentView.shoppingCart.cart.push(e),b.renderCart()}},renderCart:function(){$(".shopping-cart-bound").html("");var a=this;router.currentView.shoppingCart.cart.forEach(function(b){$(".shopping-cart-bound").append(a.shoppingCartTemplate({item:b}))}),$(".shopping-cart-bound").append('<button role="button" class="btn confirm-order-button" data-toggle="modal">Check Out</button>')}}),ScanItem=Parse.View.extend({events:{"click .new-item-submit":"doesUPCexist","click .add-item":"manualAddItem","click .add-new-item":"addNewItemFields","click .cancel-new-item-creation":"cancelCreation","click .start-scanning":"startScanning","click .stop-scanning":"stopScanning","click .start-generic-scanning":"startGenericScanning","click .stop-generic-scanning":"stopGenericScanning","keypress .this-upc":"firstScan","keypress .this-serial-number":"secondScan","click .btn-delete-item":"deleteItem","click .standard-item-creation, .generic-item-creation":"toggleCreationType","click .no-upc":"toggleUPCoff","click .enable-upc":"toggleUPCon","change .manufacturer-list":"updateManufacturer","change .generic-manufacturer-list":"updateGenericManufacturer","click .new-generic-item-submit":"genericScan","click .toggle-scan-type":"toggleScanType"},template:_.template($(".scan-item-view").text()),manualItemCreationTemplate:_.template($(".manual-item-creation-template").text()),titleTemplate:_.template($(".page-title").text()),loaderTemplate:_.template($(".loading-cover-template").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$("html, body").scrollTop(0),$(".progress-bar-body").html(""),$(".alan-arms-pos").html(this.navbarTemplate);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),$(".app-container").html(this.el);this.render();var b=new Parse.Query("customers");b.limit(1500);b.find(function(a){_.each(a,function(a){console.log(a)})})}},render:function(){$(this.el).html(this.template()),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("SCANNING"),$(document).ready(function(){$('[data-toggle="popover"]').popover()})},loader:function(){$(".loading-cover").css("opacity",0),$(".chamber-loader").css("opacity",0),setTimeout(function(){$(".loading-cover").remove(),$(".chamber-loader").remove()},220)},firstScan:function(a){13==a.keyCode?(console.log($(".this-upc").val()),$(".this-serial-number").focus()):console.log("it's not ENTER!")},secondScan:function(a){var b=this;$(".this-upc").val()===$(".this-serial-number").val()?(b.stopScanning(),alert("Oops! It looks like you scanned the UPC twice! Please retry the last item: "+$(".this-upc").val()),$(".this-upc").val(""),$(".this-serial-number").val(""),b.startScanning()):13==a.keyCode?(console.log($(".this-upc").val()+", "+$(".this-serial-number").val()),this.doesUPCexist(),$(".this-upc").val(""),$(".this-serial-number").val(""),$(".this-upc").focus()):console.log("it's not ENTER!")},startScanning:function(){this.stopGenericScanning(),$(".this-upc").attr("disabled",!1),$(".this-serial-number").attr("disabled",!1),$(".this-upc").focus(),$(".start-scanning").addClass("stop-scanning"),$(".start-scanning").text("STOP SCANNING"),$(".stop-scanning").removeClass("start-scanning")},stopScanning:function(){$(".this-upc").attr("disabled",!0),$(".this-serial-number").attr("disabled",!0),$(".stop-scanning").addClass("start-scanning"),$(".stop-scanning").text("START SCANNING"),$(".start-scanning").removeClass("stop-scanning")},doesUPCexist:function(){var a=Parse.Object.extend("itemInstance"),b=new a,c=this,d=[],e="",f="",g=!1;for(d.push($(".this-upc").val()),d.push($(".this-serial-number").val()),console.log(d),i=0;i<d.length;i++)isNaN(parseInt(d[i]))?e=d[i]:f=d[i];var h=f;console.log(h);var j=new Parse.Query("itemInstance");j.limit(1500),j.find({success:function(a){for(console.log(a),console.log(e),i=0;i<a.length;i++)a[i].attributes.serialNumber===e?(c.stopScanning(),g=!0):(thisSerialNumber=e,b.set("serialNumber",thisSerialNumber),this.instance=b)}}).then(function(){g===!0&&alert("This Serial Number : "+e+" already exists!"),console.log(g),k()}),console.log(g);var k=function(){if(console.log(h),g===!1){var a=new Parse.Query("itemType"),c=Parse.User.current();a.containedIn("accessBy",[c,c.get("globalUser")]),a.limit(1500),a.equalTo("UPC",h),a.find({success:function(a){console.log(b),console.log(a),b.set({Archived:!1,Deleted:!1,Caliber:a[0].attributes.Caliber,Cost:a[0].attributes.Cost,DealerPrice:a[0].attributes.DealerPrice,MSRP:a[0].attributes.MSRP,Description:a[0].attributes.Description,Model:a[0].attributes.Model,UPC:a[0].attributes.UPC,shop:Parse.User.current(),itemType:a[0],itemInstanceCode:0,dateSaved:Date()}).save(),$(".scanned-item-list").append('<div class="col-md-12 scanned-item-container"><div class="scanned-item-attribute col-md-2"><p>MFR: '+a[0].attributes.Manufacturer+'</p></div><div class="scanned-item-attribute col-md-4"><p>MODEL: '+a[0].attributes.Model+'</p></div><div class="scanned-item-attribute col-md-4"><p>UPC: '+a[0].attributes.UPC+'</div><div class="scanned-item-attribute col-md-2">Price:'+a[0].attributes.DealerPrice+"</div>"),$(".scanned-item-total").text($(".scanned-item-list").children().length),console.log(b),console.log("successful! : "+a[0].attributes.UPC)}})}}},deleteItem:function(a){console.log("deleting item");var b=$(a.currentTarget).attr("id"),c=new Parse.Query("itemInstance");c.limit(1500),c.equalTo("objectId",$(a.currentTarget).attr("id")),console.log($(a.currentTarget).attr("id")),c.include("order"),c.find({success:function(a){console.log(a),a.destroy({success:function(){$("."+b).remove()},error:function(a){console.log(a)}})},error:function(a){console.log(a)}})},startGenericScanning:function(){this.stopScanning(),$(".start-generic-scanning").removeClass("btn-success").addClass("btn-warning"),$(".start-generic-scanning").text("STOP SCANNING"),$(".generic-upc").attr("disabled",!1),$(".generic-quantity-number").attr("disabled",!1),$(".start-generic-scanning").addClass("stop-generic-scanning"),$(".generic-upc").focus()},stopGenericScanning:function(){$(".start-generic-scanning").removeClass("btn-warning").addClass("btn-success"),$(".start-generic-scanning").text("GENERIC SCAN"),$(".generic-upc").attr("disabled",!0),$(".generic-quantity-number").attr("disabled",!0),$(".start-generic-scanning").removeClass("stop-generic-scanning")},genericScan:function(){$(".app-container").append(this.loaderTemplate());var a=this,b=$(".generic-upc").val(),c=[],d=new Parse.Query("itemType"),e=Parse.User.current();d.containedIn("accessBy",[e,e.get("globalUser")]),d.limit(1500),d.equalTo("UPC",b),d.find(function(a){for(i=0;i<parseInt($(".generic-quantity-number").val());i++){var b=Parse.Object.extend("itemInstance"),c=new b;c.set({Archived:!1,Deleted:!1,Caliber:a[0].attributes.Caliber,Cost:a[0].attributes.Cost,DealerPrice:a[0].attributes.DealerPrice,MSRP:a[0].attributes.MSRP,Description:a[0].attributes.Description,Model:a[0].attributes.Model,UPC:a[0].attributes.UPC,shop:Parse.User.current(),itemType:a[0],itemInstanceCode:0,dateSaved:Date()}),c.save(),setTimeout(function(){$(".scanned-item-list").append('<div class="col-md-12 scanned-item-container"><div class="scanned-item-attribute col-md-3"><p>MFR: '+a[0].attributes.Manufacturer+'</p></div><div class="scanned-item-attribute col-md-4"><p>MODEL: '+a[0].attributes.Model+'</p></div><div class="scanned-item-attribute col-md-4"><p>UPC: '+a[0].attributes.UPC+'</div><div class="scanned-item-attribute col-md-1 scanned-item-icon">'+a[0].attributes.DealerPrice+"</div>")},100)}}).then(function(){for(console.log(c),i=0;i<c.length;i++){var a=c[i];setTimeout(function(){console.log(a)},200),console.log(c[i].attributes.Model)}console.log(c)}).then(function(){a.loader()})},manualAddItem:function(){$(".add-item").attr("disabled","disabled"),$(".new-item-submit").attr("disabled","disabled");var a=this;this.stopScanning(),$(".add-here").append(a.manualItemCreationTemplate({})),$(".new-item-form").css("display","block"),$(".generic-new-item-form").css("display","none"),$(".standard-item-creation").addClass("active"),$(".no-upc").addClass("btn-info"),$(".no-upc").removeClass("btn-default"),setTimeout(function(){$(".new-item-creation").addClass("visible-item-creation")},10),console.log("added it");var b=[],c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.limit(1500),c.find(function(a){a.forEach(function(a){var c="";c=a.attributes.Manufacturer,b.push(c)});var c=[];$.each(b,function(a,b){-1===$.inArray(b,c)&&c.push(b)}),c.forEach(function(a){$(".manufacturer-list").append("<option class='manufacturer-choice col-md-2 btn-default btn' name='"+a+"'>"+a+"</option")})})},toggleCreationType:function(){$(event.target).hasClass("standard-item-creation")?(this.toggleUPCon(),$(".generic").val(""),$(".no-upc").css("display","none"),$(".standard-item-creation").removeClass("btn-default"),$(".standard-item-creation").addClass("btn-info"),$(".new-item-form").css("display","block"),$(".generic-new-item-form").css("display","none"),$(".standard-item-creation").addClass("active"),$(".generic-item-creation").removeClass("active"),$(".generic-item-creation").addClass("btn-default"),$(".generic-item-creation").removeClass("btn-info")):$(event.target).hasClass("generic-item-creation")&&($(".standard").val(""),$(".no-upc").css("display","block"),$(".generic-item-creation").removeClass("btn-default"),$(".generic-item-creation").addClass("btn-info"),$(".new-item-form").css("display","none"),$(".generic-new-item-form").css("display","block"),$(".standard-item-creation").removeClass("active"),$(".generic-item-creation").addClass("active"),$(".standard-item-creation").addClass("btn-default"),$(".standard-item-creation").removeClass("btn-info"))
},toggleUPCoff:function(){var a=$(".no-upc");a.prop("disabled",!0),a.text("UPC OFF"),$(".generic-upc").val("").prop("disabled",!0).css("border","1px solid #ccc").removeAttr("required"),$(".enable-upc").css("display","block")},toggleUPCon:function(){$(".no-upc").prop("disabled",!1),$(".no-upc").text("UPC ON"),$(".generic-upc").prop("disabled",!1).prop("required",!0),$(".enable-upc").css("display","none")},addNewItemFields:function(){if($(".standard-item-creation").hasClass("active")){var a=$(".new-item-form"),b=a.find("input").filter(function(){return""===this.value}),c=a.find("input[required]");if($.each(c,function(a,b){var d=$(b);d.val()?d.css("border","1px solid #ccc"):d.css("border","2px solid red"),c.length===a+1&&(d.focus(),$("body").animate({scrollTop:300},"fast"))}),!b.length){var d=Parse.Object.extend("itemType"),e=new d;e.save({Archived:!1,Deleted:!1,Manufacturer:$(".manufacturer").val(),Description:$(".description").val(),Caliber:$(".caliber").val(),Model:$(".model").val(),Cost:"$"+$(".cost").val(),DealerPrice:"$"+$(".dealer-price").val(),MSRP:"$"+$(".msrp").val(),UPC:$(".upc").val(),dateSaved:Date(),accessBy:Parse.User.current()}),$(".scanned-item-list").append('<div class="col-md-12 scanned-item-container"><div class="scanned-item-attribute col-md-6"><p>'+e.attributes.Model+'</p></div><div class="scanned-item-attribute col-md-6"><p>'+e.attributes.UPC+"</div>"),$(".new-item-form").children("input").val(""),$(".new-item-form").children("textarea").val(""),$(".manufacturer").focus(),$("input.manual-add-item").val("")}}else if($(".generic-item-creation").hasClass("active")&&$(".no-upc").prop("disabled")===!1){var a=$(".generic-new-item-form"),b=a.find("input").filter(function(){return""===this.value}),c=a.find("input[required]");if($.each(c,function(a,b){var d=$(b);d.val()?d.css("border","1px solid #ccc"):d.css("border","2px solid red"),c.length===a+1&&(d.focus(),$("body").animate({scrollTop:300},"fast"))}),!b.length){var d=Parse.Object.extend("itemType"),e=new d;e.set({Archived:!1,Deleted:!1,Manufacturer:$(".generic-manufacturers").val(),Description:$(".generic-description").val(),Caliber:$(".generic-caliber").val(),Model:$(".generic-model").val(),Cost:"$"+$(".generic-cost").val(),DealerPrice:"$"+$(".generic-dealer-price").val(),MSRP:"$"+$(".generic-msrp").val(),UPC:$(".generic-upc").val(),dateSaved:Date(),accessBy:Parse.User.current()}).save();var f=[];for(i=0;i<parseInt($(".amount").val());i++){var g=Parse.Object.extend("itemInstance"),h=new g;h.set({Archived:!1,Deleted:!1,Manufacturer:$(".generic-manufacturers").val(),Description:$(".generic-description").val(),Caliber:$(".generic-caliber").val(),Model:$(".generic-model").val(),Cost:"$"+$(".generic-cost").val(),DealerPrice:"$"+$(".generic-dealer-price").val(),MSRP:"$"+$(".generic-msrp").val(),UPC:$(".generic-upc").val(),shop:Parse.User.current(),itemType:e,itemInstanceCode:0,dateSaved:Date(),accessBy:Parse.User.current()}).save(),f.push(h)}var j=parseInt($(".scanned-item-total").text()),k=j+f.length;$(".scanned-item-total").text(k.toString()),$(".scanned-item-list").append('<div class="col-md-12 scanned-item-container"><div class="scanned-item-attribute col-md-4"><p>'+h.attributes.Model+'</p></div><div class="scanned-item-attribute col-md-4"><p>'+h.attributes.UPC+'</div><div class="scanned-item-attribute col-md-4">x '+f.length+"</div>"),$("input.manual-add-item").val("")}}else if($(".generic-item-creation").hasClass("active")&&$(".no-upc").prop("disabled")===!0){var a=$(".generic-new-item-form"),b=a.find("input").filter(function(){return $(this).prop("disabled")?void 0:""===this.value}),c=a.find("input[required]");if($.each(c,function(a,b){var d=$(b);d.val()?d.css("border","1px solid #ccc"):d.css("border","2px solid red"),c.length===a+1&&(d.focus(),$("body").animate({scrollTop:300},"fast"))}),!b.length){var d=Parse.Object.extend("itemType"),e=new d;e.set({Archived:!1,Deleted:!1,Manufacturer:$(".generic-manufacturers").val(),Description:$(".generic-description").val(),Caliber:$(".generic-caliber").val(),Model:$(".generic-model").val(),Cost:"$"+$(".generic-cost").val(),DealerPrice:"$"+$(".generic-dealer-price").val(),MSRP:"$"+$(".generic-msrp").val(),UPC:"NA",accessBy:Parse.User.current()}).save();var f=[];for(i=0;i<parseInt($(".amount").val());i++){var g=Parse.Object.extend("itemInstance"),h=new g;h.set({Archived:!1,Deleted:!1,Manufacturer:$(".generic-manufacturers").val(),Description:$(".generic-description").val(),Caliber:$(".generic-caliber").val(),Model:$(".generic-model").val(),Cost:"$"+$(".generic-cost").val(),DealerPrice:"$"+$(".generic-dealer-price").val(),MSRP:"$"+$(".generic-msrp").val(),UPC:"NA",shop:Parse.User.current(),itemType:e,itemInstanceCode:0}).save(),f.push(h)}var j=parseInt($(".scanned-item-total").text()),k=j+f.length;$(".scanned-item-total").text(k.toString()),$(".scanned-item-list").append('<div class="col-md-12 scanned-item-container"><div class="scanned-item-attribute col-md-4"><p>'+h.attributes.Model+'</p></div><div class="scanned-item-attribute col-md-4"><p>'+h.attributes.UPC+'</div><div class="scanned-item-attribute col-md-4">x '+f.length+"</div>"),$("input.manual-add-item").val("")}}},cancelCreation:function(){$(".add-item").attr("disabled",!1),$(".new-item-submit").attr("disabled",!1),$(".new-item-creation").removeClass("visible-item-creation"),setTimeout(function(){$(".add-here").html("")},380),console.log("pudding")},updateManufacturer:function(){$(".manufacturer").val($(".manufacturer-list option:selected").val())},updateGenericManufacturer:function(){$(".generic-manufacturers").val($(".generic-manufacturer-list option:selected").val())},toggleScanType:function(){this.stopScanning(),this.stopGenericScanning(),$(".scan-option").toggleClass("toggled-scanner-off"),setTimeout(function(){$(".scan-option").toggleClass("on-display")},180)}}),ShelfList=Parse.View.extend({events:{},template:_.template($(".shelf-list-view").text()),shelfItemTemplate:_.template($(".shelf-list-item").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$("html, body").scrollTop(0);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),$(".app-container").html(this.el),this.render()}},render:function(){$(this.el).append(this.template()),this.getShelfItems()},getShelfItems:function(){var a=this;$(".shelf-item-list-bound").html("");var b=new Parse.Query("itemInstance");b.equalTo("itemInstanceCode",0),b.each(function(b){$(".shelf-item-list-bound").append(a.shelfItemTemplate({item:b.attributes}))})}}),OrderInstanceView=Parse.View.extend({events:{"click .print-invoice":"printInvoice","click .order-fulfilled":"orderFulfilled","click button.undo-backorder":"undoBackorder","click button.apply-instance":"confirmPending","click .void-invoice":"voidOrder"},template:_.template($(".final-order-instance-view").text()),customerTemplate:_.template($(".customer-info-order-template").text()),itemInstanceTemplate:_.template($(".customer-info-order-items-template").text()),backorderInstanceTemplate:_.template($(".customer-info-backorder-template").text()),totalTemplate:_.template($(".sales-order-template-total").text()),titleTemplate:_.template($(".page-title").text()),loaderTemplate:_.template($(".loading-cover-template").text()),navbarTemplate:_.template($(".navbar-template").text()),orderItems:{backorders:[],items:[]},initialize:function(){$(".navbar").css("display","block"),$(".app-container").html(this.el),$(".print-invoice-clone").html(""),$(".alan-arms-pos").html(this.navbarTemplate),this.render()},render:function(){$(this.el).append(this.template()),$(".app-container").append(this.loaderTemplate),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("ORDERS"),this.getOrder()},loader:function(){$(".loading-cover").css("opacity",0),$(".chamber-loader").css("opacity",0),setTimeout(function(){$(".loading-cover").remove(),$(".chamber-loader").remove()},220)},getOrder:function(){var a=this,b=new Parse.Query("order");b.equalTo("objectId",this.options),b.include("customer"),b.find({success:function(b){a.order=b[0],b[0]&&b[0].attributes.fulfilled===!1&&setTimeout(function(){$(".order-fulfilled").css("display","block !important"),$(".order-fulfilled").attr("disabled",!1)},100),a.showCustomer(a.order),$(".void-invoice").attr("id",b.id)},error:function(){}}).then(function(){a.getItems()})},showCustomer:function(a){var b=a.attributes.customer;$(".customer-info").append(this.customerTemplate({customer:b,order:a}))},getItems:function(){var a=this,b=new Parse.Query("itemInstance");b.equalTo("order",this.order),b.include("itemType"),b.find({success:function(b){b.length>0?b.forEach(function(b){a.showItem(b),a.orderItems.items.push(b)}):$(".ship-head").html("")},error:function(){}}).then(function(){a.getBackOrders()})},getBackOrders:function(){var a=this,b=new Parse.Query("backOrder");b.equalTo("order",this.order),b.containedIn("item",[void 0,null]),b.find({success:function(b){0!=b.length&&b.forEach(function(b){var c=new Parse.Query("itemType"),d=Parse.User.current();c.containedIn("accessBy",[d,d.get("globalUser")]),c.equalTo("UPC",b.attributes.itemType),c.first({success:function(c){a.showBackOrder(b,c),a.orderItems.items.push(b)},error:function(){}})})},error:function(){}}).then(function(){a.getTotal()})},showBackOrder:function(a,b){$(".backorder-items").append(this.backorderInstanceTemplate({backorder:a,type:b.attributes}))},showItem:function(a){$(".in-stock-items").append(this.itemInstanceTemplate({item:a,type:a.attributes.itemType}))},getTotal:function(){var a=this,b=0;setTimeout(function(){$(".item-price").each(function(){var a=parseInt(this.innerHTML.replace(/\s+/g,"").replace(/\,/g,"").substr(1));b+=a}),a.showTotal(b),$(".backorder-items").children().length<2==!0&&($(".invoice-buttons").append('<button class="order-fulfilled btn btn-info float-right">FULFILLED</button>'),$(".order-fulfilled").css("display","block"),$(".backorder-head").html(""))},800)},showTotal:function(a){var b=parseInt(this.order.attributes.shipping),c=a+=b;$(".backorder-items").append(this.totalTemplate({total:c,shipping:b})),this.loader()},printInvoice:function(){$(".print-invoice-clone").html("");var a=$(".final-order").clone();$(".print-invoice-clone").html(a),$(".order-fulfilled").css("display","block")&&$(".order-fulfilled").css("display","none"),window.print(),$(".order-fulfilled").css("display","none")&&$(".order-fulfilled").css("display","block")},orderFulfilled:function(){var a=this,b=new Parse.Query("order");b.equalTo("objectId",this.options),b.include("customer"),b.find({success:function(b){(b[0].attributes.fulfilled===!1||void 0===b[0].attributes.fulfilled)&&(b[0].set({fulfilled:!0}).save(),a.getOrder)},error:function(){}})},voidOrder:function(){confirm("are you sure?")&&(this.orderItems.items.forEach(function(a){a.save({backOrder:null,itemInstanceCode:0,order:null})}),this.orderItems.backorders.forEach(function(a){a.destroy({})}),this.order.save({"void":!0}).then(function(){router.navigate("#orders",{trigger:!0,replace:!0})}))},undoBackorder:function(a){$("button").attr("disabled","true");var b=this,c=a.currentTarget.id,d=new Parse.Query("itemInstance");d.equalTo("objectId",c);var e=new Parse.Query("backOrder");d.first().then(function(a){a.save({itemInstanceCode:0,backOrder:null,order:null}).then(function(a){e.equalTo("item",a),e.first().then(function(a){a.set("item",null),a.save().then(function(){router.swap(new OrderInstanceView(b.options))})})})})},confirmPending:function(a){$("button").attr("disabled","true");var b=this,c=a.currentTarget.id;$("#"+c).prop("disable",!0);var d=new Parse.Query("backOrder");d.include("order"),d.equalTo("objectId",c),d.first().then(function(a){var c=new Parse.Query("itemInstance");c.equalTo("UPC",a.get("itemType")),c.first().then(function(c){backOrder=a,order=backOrder.attributes.order,c.save({itemInstanceCode:1,backOrder:backOrder,order:order}).then(function(a){backOrder.set("item",a),backOrder.save()}).then(function(){router.swap(new OrderInstanceView(b.options))})})})}}),ProfilePageView=Parse.View.extend({events:{"click .edit-profile-button":"toggleEditAttribute","click .save-profile-edit-button":"saveProfileEdit","change #myFile":"readURL"},mainTemplate:_.template($(".profile-page-template").text()),titleTemplate:_.template($(".page-title").text()),profilePaymentTemplate:_.template($(".profile-payment-template").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$(".progress-bar-body").html(""),$(".app-container").html(this.el),$(".alan-arms-pos").html(this.navbarTemplate);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),this.render(),$(".payment-tab").css("cursor","not-allowed"),Parse.User.current().get("logo")&&(console.log(Parse.User.current().get("logo")._url),$("#logo-img").attr("src",Parse.User.current().get("logo")._url)),this.readURL}},render:function(){$(this.el).append(this.mainTemplate({user:Parse.User.current()})),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("PROFILE")},readURL:function(){console.log($("#myFile")[0]);var a=document.getElementById("myFile"),b="";if("files"in a){var c=new FileReader;c.readAsDataURL(a.files[0]),c.onload=function(a){document.getElementById("logo-img").src=a.target.result}}else""==a.value?b+="Select one or more files.":(b+="The files property is not supported by your browser!",b+="<br>The path of the selected file: "+a.value)},toggleEditAttribute:function(){$(event.target).hasClass("active")?(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled","disabled")}),$(".save-profile-edit-button").css("opacity",0),$(event.target).removeClass("active")):(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled",!1)}),$(".save-profile-edit-button").css("opacity",1),$(event.target).addClass("active"))},saveProfileEdit:function(){var a=function(){var a=$("#myFile")[0];if(a.files.length>0){var b=a.files[0],c="photo.jpg";return new Parse.File(c,b)}return 0===a.files.length?Parse.User.current().get("photo"):void 0};Parse.User.current().set({company:0!=$(".company-input").val().length?$(".company-input").val():Parse.User.current().get("company"),addressOne:0!=$(".address-one-input").val().length?$(".address-one-input").val():Parse.User.current().get("addressOne"),addressTwo:0!=$(".address-two-input").val().length?$(".address-two-input").val():Parse.User.current().get("addressTwo"),phone:0!=$(".phone-input").val().length?$(".phone-input").val():Parse.User.current().get("phone"),owner:$(".owner-input").val()?$(".owner-input").val():Parse.User.current().get("owner"),ffl:0!=$(".ffl-input").val().length?parseInt($(".ffl-input").val()):Parse.User.current().get("ffl"),username:0!=$(".username-input").val().length?$(".username-input").val():Parse.User.current().get("username"),email:0!=$(".email-input").val().length?$(".email-input").val():Parse.User.current().get("email"),logo:void 0!=a()?a():Parse.User.current().get("logo")}).save(),console.log(a()),$(".edit-profile-button").click(),$(".profile-edit").val(""),$(".company-input").prop("placeholder",Parse.User.current().get("company")),$(".address-one-input").prop("placeholder",Parse.User.current().get("addressOne")),$(".address-two-input").prop("placeholder",Parse.User.current().get("addressTwo")),$(".phone-input").prop("placeholder",Parse.User.current().get("phone")),$(".owner-input").prop("placeholder",Parse.User.current().get("owner")),$(".ffl-input").prop("placeholder",Parse.User.current().get("ffl")),$(".username-input").prop("placeholder",Parse.User.current().get("username")),$(".email-input").prop("placeholder",Parse.User.current().get("email"))}}),signUpView=Parse.View.extend({events:{"click .submit-sign-up":"signUp","keydown .email-input":"enterSignUp","click .close":"closeAlert"},mainTemplate:_.template($(".sign-up-template").text()),titleTemplate:_.template($(".page-title").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){$(".app-container").html(this.el),$(".alan-arms-pos").html(this.navbarTemplate),this.render()},render:function(){$(this.el).append(this.mainTemplate({user:Parse.User.current()})),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("SIGN UP")},enterSignUp:function(a){console.log(a.which);var b=a.which;13==b&&this.signUp()},signUp:function(){var a=$(".username-input").val(),b=($(".username-input").val(),$(".password-input").val()),c=$(".email-input").val(),d=$(".address-input").val(),e=$(".owner-input").val(),f=$(".ffl-input").val(),g=new Parse.User;g.set({username:a,password:b,email:c,company:a,owner:e,address:d,ffl:f}),console.log(g);var h=!0;if(_.each($(".sign-up-field"),function(a){return $(a).val().length<1?void console.log("it's empty, foo!"):h=!1}),console.log(h),h===!1){var i=this;g.signUp(null,{success:function(a){console.log(a),a.save(),$(".app-container").html(""),i.remove(),router.swap(new ProfilePageView)},error:function(a,b){console.log("Error: "+b.code+" "+b.message)}})}else $(".alert-danger").css({visibility:"visible",height:"auto","margin-bottom":"20px",padding:"15px"}),_.each($(".sign-up-field"),function(a){$(a).css("border","1px solid red")})},closeAlert:function(){$(".alert-danger").css({visibility:"hidden",height:"0px","margin-bottom":"0px",padding:"0px",overflow:"hidden"})}}),ContactPageView=Parse.View.extend({events:{},mainTemplate:_.template($(".contact-page-template").text()),titleTemplate:_.template($(".page-title").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$(".app-container").html(this.el),$(".alan-arms-pos").html(this.navbarTemplate);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),this.render()}},render:function(){$(this.el).append(this.mainTemplate({user:Parse.User.current()})),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("CONTACT US")}}),FullStockList=Parse.View.extend({events:{},template:_.template($(".stock-list-template").text()),stockItemTemplate:_.template($(".stock-list-item-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$("html, body").scrollTop(0);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),$(".app-container").html(this.el),this.render()}},render:function(){$(this.el).append(this.template()),this.getShelfItems()},getShelfItems:function(){var a=this;$(".stock-item-list-bound").html("");var b=new Parse.Query("itemInstance");b.equalTo("itemInstanceCode",void 0),b.each(function(b){$(".stock-item-list-bound").append(a.stockItemTemplate({item:b.attributes,model:b}))})}}),CsvDumpView=Parse.View.extend({initialize:function(){var a=this;a.getHistory().then(function(b){var c=JSON.stringify(a.toJSON(b)),d=$.parseJSON(c);return a.JSON2CSV(d)}).then(function(b){window.open("data:text/csv;charset=utf-8,"+escape(b)),a.remove()})},getHistory:function(){var a=new Parse.Query("itemInstance");a.equalTo("itemInstanceCode",2),a.equalTo("Deleted",!1),a.include("itemType");var b=new Parse.Query("backOrder");return b.include("itemParent"),Promise.resolve(a.find().then(function(a){return a}).then(function(a){return b.find().then(function(b){return{soldItems:a,soldBackOrders:b}}).then(function(a){return a})}).then(function(a){return a}))},toJSON:function(a){var b=_.map(a.soldBackOrders,function(a){return{status:"Backorder",id:a.id?a.id+"":"",sold:a.createdAt?Date(a.createdAt)+"":"",upc:a.get("itemType")?a.get("itemType")+"":"",manufacturer:a.get("itemParent")&&a.get("itemParent").get("Manufacturer")?a.get("itemParent").get("Manufacturer")+"":"",model:a.get("itemParent")&&a.get("itemParent").get("Model")?a.get("itemParent").get("Model")+"":"",caliber:a.get("itemParent")&&a.get("itemParent").get("Caliber")?a.get("itemParent").get("Caliber")+"":"",msrp:a.get("itemParent")&&a.get("itemParent").get("MSRP")?a.get("itemParent").get("MSRP")+"":"",dealerPrice:a.get("itemParent")&&a.get("itemParent").get("DealerPrice")?a.get("itemParent").get("DealerPrice")+"":"",cost:a.get("itemParent")&&a.get("itemParent").get("Cost")?a.get("itemParent").get("Cost")+"":"",serialNumber:a.get("serialNumber")?a.get("serialNumber")+"":""}}),c=_.map(a.soldItems,function(a){return{status:a.get("serialNumber")?"Tracked Item":"Generic Item",id:a.id?a.id+"":"",sold:a.createdAt?Date(a.createdAt)+"":"",upc:a.get("itemType")&&a.get("itemType").get("UPC")?a.get("itemType").get("UPC")+"":"",manufacturer:a.get("itemType")&&a.get("itemType").get("Manufacturer")?a.get("itemType").get("Manufacturer")+"":"",model:a.get("itemType")&&a.get("itemType").get("Model")?a.get("itemType").get("Model")+"":"",caliber:a.get("itemType")&&a.get("itemType").get("Caliber")?a.get("itemType").get("Caliber")+"":"",msrp:a.get("itemType")&&a.get("itemType").get("MSRP")?a.get("itemType").get("MSRP")+"":"",dealerPrice:a.get("itemType")&&a.get("itemType").get("DealerPrice")?a.get("itemType").get("DealerPrice")+"":"",cost:a.get("itemType")&&a.get("itemType").get("Cost")?a.get("itemType").get("Cost")+"":"",serialNumber:a.get("serialNumber")?a.get("serialNumber")+"":""}});return b.concat(c)},JSON2CSV:function(a){{var b="object"!=typeof a?JSON.parse(a):a,c="",d="";b[0]}for(var e in b[0]){var f=e+"";d+='"'+f.replace(/"/g,'""')+'",'}d=d.slice(0,-1),c+=d+"\r\n";for(var g=0;g<b.length;g++){var d="";for(var e in b[g]){var f=b[g][e]+"";d+='"'+f.replace(/"/g,'""')+'",'}d=d.slice(0,-1),c+=d+"\r\n"}return c}}),AnalyticsView=Parse.View.extend({events:{},mainTemplate:_.template($(".analytics-page-template").text()),titleTemplate:_.template($(".page-title").text()),navbarTemplate:_.template($(".navbar-template").text()),initialize:function(){if(null===Parse.User.current()==!0)window.location.href="#sign-in",router.swap(new FrontPage);else{$("html, body").scrollTop(0),$(".app-container").html(this.el),$(".alan-arms-pos").html(this.navbarTemplate);var a=window.location.hash.substring(1).toString();_.each($(".nav-link"),function(b){b.id==a?$(b).css("color","#ffffff"):$(b).css("color","#9d9d9d")}),this.render(),this.googleChart()}},render:function(){$(this.el).append(this.mainTemplate({user:Parse.User.current()})),$(".put-title-here").html(this.titleTemplate()),$(".page-title").text("ANALYTICS")},queryAllOrders:function(){var a=this,b=[],c=new Parse.Query("order");c.limit(1500),c.equalTo("shop",Parse.User.current()),c.ascending("createdAt"),c.find({success:function(a){b.push(a)},error:function(){console.log("No orders were found.")}}).then(function(){var c=[];for(console.log(b[0]),i=0;i<b[0].length;i++)c.push(b[0][i]);a.getCreatedAt(b[0])})},D3itemInstances:function(){var a=this,b=[],c=new Parse.Query("itemInstance");c.limit(1500),c.equalTo("shop",Parse.User.current()),c.find({success:function(a){for(i=0;i<a.length;i++)b.push(a[i]);return b}}).then(function(){a.D3DataTest(b)})},D3Test:function(){var a=[],b=new Parse.Query("itemInstance");b.limit(1500),b.find({success:function(b){for(i=0;i<b.length;i++){for(var c=b[i].attributes.MSRP.trim().replace(",","");"$"===c.charAt(0);)c=c.substr(1);a.push(c)}}}).then(function(){for(noZero=[],i=0;i<a.length;i++)parseInt(a[i].replace(".",""))>0?noZero.push(a[i]):console.log(""+a[i]+" is gone.");sortedCosts=noZero.sort(function(a,b){return a-b})})},D3DataTest:function(a){var b=a,c={top:20,right:20,bottom:30,left:40},d=960-c.left-c.right,e=500-c.top-c.bottom,f=d3.scale.ordinal().rangeRoundBands([0,d],.1),g=d3.scale.linear().rangeRound([e,0]),h=d3.scale.ordinal().range(["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"]),i=d3.svg.axis().scale(f).orient("bottom"),j=d3.svg.axis().scale(g).orient("left").tickFormat(d3.format(".2s")),k=d3.select(".chart").append("svg").attr("width",d+c.left+c.right).attr("height",e+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");console.log(b),b.forEach(function(a){a.caliber=a.attributes.Caliber,a.statusCode=a.attributes.itemInstanceCode}),b.sort(function(a,b){return b.statusCode-a.statusCode}),f.domain([0,d3.max(b,function(a){return a.statusCode})]),g.range(b.map(function(a){return a.caliber})),k.append("g").attr("class","x axis").attr("transform","translate(0,"+e+")").call(i),k.append("g").attr("class","y axis").call(j).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Caliber");var l=k.selectAll(".statusCode").data(b).enter().append("g").attr("class","g").attr("transform",function(a){return"translate("+f(a.statusCode)+",0)"});l.selectAll("rect").data(function(a){return a.statusCode}).enter().append("rect").attr("width",f.rangeBand()).attr("y",function(a){return g(a.y1)}).attr("height",function(a){return g(a.y0)-g(a.y1)}).style("fill",function(a){return h(a.statusCode)});var m=k.selectAll(".legend").data(h.domain().slice().reverse()).enter().append("g").attr("class","legend").attr("transform",function(a,b){return"translate(0,"+20*b+")"});m.append("rect").attr("x",d-18).attr("width",18).attr("height",18).style("fill",h),m.append("text").attr("x",d-24).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(a){return a})},getCreatedAt:function(a){var b=[];for(i=0;i<a.length;i++)b.push(a[i].createdAt);return console.log(b),b},googleChart:function(){var a=[],b=new Parse.Query("itemInstance");b.equalTo("shop",Parse.User.current()),b.limit(1500),b.find({success:function(b){for(i=0;i<b.length;i++)a.push(b[i])}}).then(function(){function b(){var a=new google.visualization.DataTable;a.addColumn("timeofday","Date Ordered"),a.addColumn("number","MSRP"),a.addColumn("number","Dealer Price"),a.addRows([[{v:[8,0,0],f:"8 am"},1,.25],[{v:[9,0,0],f:"9 am"},2,.5],[{v:[10,0,0],f:"10 am"},3,1],[{v:[11,0,0],f:"11 am"},4,2.25],[{v:[12,0,0],f:"12 pm"},5,2.25],[{v:[13,0,0],f:"1 pm"},6,3],[{v:[14,0,0],f:"2 pm"},7,4],[{v:[15,0,0],f:"3 pm"},8,5.25],[{v:[16,0,0],f:"4 pm"},9,7.5],[{v:[17,0,0],f:"5 pm"},10,10]]);var b={title:"Motivation and Energy Level Throughout the Day",colors:["rgb(64,64,65)","rgb(237,50,69)"],hAxis:{title:"Date Ordered",format:"h:mm a",viewWindow:{min:[7,30,0],max:[17,30,0]}},vAxis:{title:"$$"}},c=new google.visualization.ColumnChart(document.getElementById("chart_div"));c.draw(a,b)}for(i=0;i<a.length;i++)console.log(a[i].attributes.dateSaved.slice(3,15));google.load("visualization","1",{packages:["corechart","bar"]}),google.setOnLoadCallback(b)})}}),AppRouter=Parse.Router.extend({routes:{"":"landingPage","sign-in":"frontPage","sign-up":"signUpPage",scan:"scanItem",inventory:"inventoryList",shelf:"shelfList","inventory/backorders":"backorderList","inventory/fullstock":"fullStockList",orders:"orderList",order:"placeOrder","order/:id":"finalOrder","order/print_list":"printList",customers:"customerList",profile:"profilePage",contact:"contactPage",analytics:"analyticsPage"},initialize:function(){this.navOptions=null,this.currentView=null},landingPage:function(){this.swap(new LandingPage({router:this}))},frontPage:function(){this.swap(new FrontPage({router:this}))},signUpPage:function(){this.swap(new signUpView)},scanItem:function(){this.swap(new ScanItem)},inventoryList:function(){this.swap(new InventoryList)},shelfList:function(){this.swap(new ShelfList)},backorderList:function(){this.swap(new BackorderList)},fullStockList:function(){this.swap(new FullStockList)},orderList:function(){this.swap(new OrderList)},printList:function(a){this.swap(new OrderInstanceView(a))},placeOrder:function(){this.swap(new PlaceOrder)},orderItems:function(a){this.swap(new OrderItemsView({shopID:a}))},attachForm3:function(a){this.swap(new AttachForm3({orderID:a}))},customerList:function(){this.swap(new CustomerList)},finalOrder:function(a){this.swap(new OrderInstanceView(a))},profilePage:function(){this.swap(new ProfilePageView)},contactPage:function(){this.swap(new ContactPageView({user:Parse.User.current()}))},itemEditView:function(){this.swap(new ItemEditView)},analyticsPage:function(){this.swap(new AnalyticsView)},swap:function(a){this.currentView&&this.currentView.remove(),this.currentView=a;var b=[],c=new Parse.Query("customer");c.limit(1500),c.equalTo("shop",Parse.User.current()),c.find(function(a){a.forEach(function(a){b.push(a)})}).then(function(){$(".customers-badge").text(b.length)});var d=[],e=new Parse.Query("order");e.limit(1500),e.equalTo("shop",Parse.User.current()),e.find(function(a){a.forEach(function(a){d.push(a)})}).then(function(){$(".orders-badge").text(d.length)})}});Parse.initialize("20pXgK4OyuzpFjfqwFD1ARUDkWbAAhrofuXFasvj","R6BhdiUvc4ctMpuB2GnymOrbLnmFnRC7e04Gyynv");var router=new AppRouter;Parse.history.start(),$(".log-out").click(function(){Parse.User.logOut()});var theNumber=[],query=new Parse.Query("customer");query.limit(1500),query.equalTo("shop",Parse.User.current()),query.find(function(a){a.forEach(function(a){theNumber.push(a)})}).then(function(){$(".customers-badge").text(theNumber.length)});var theOrders=[],queryOrders=new Parse.Query("order");queryOrders.limit(1500),queryOrders.equalTo("shop",Parse.User.current()),queryOrders.find(function(a){a.forEach(function(a){a.attributes.fulfilled===!1&&1!=a.attributes["void"]&&theOrders.push(a)})}).then(function(){$(".orders-badge").text(theOrders.length)});